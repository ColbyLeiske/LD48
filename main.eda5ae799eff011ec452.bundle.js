/*! For license information please see main.eda5ae799eff011ec452.bundle.js.LICENSE.txt */
(()=>{var e,t={627:(e,t,i)=>{"use strict";i(260);const d=JSON.parse('{"nodes":[{"x":168,"y":549,"id":0},{"x":176,"y":446,"id":1},{"x":228,"y":368,"id":2},{"x":271,"y":338,"id":3},{"x":348,"y":458,"id":4},{"x":395,"y":585,"id":5},{"x":276,"y":614,"id":6},{"x":621,"y":543,"id":7},{"x":615,"y":691,"id":8},{"x":847,"y":564,"id":9},{"x":985,"y":663,"id":10},{"x":1010,"y":451,"id":11},{"x":1104,"y":279,"id":12},{"x":1102,"y":210,"id":13},{"x":1126,"y":101,"id":14},{"x":923,"y":85,"id":15},{"x":996,"y":1,"id":16},{"x":895,"y":119,"id":17},{"x":744,"y":166,"id":18},{"x":570,"y":192,"id":19},{"x":647,"y":295,"id":20},{"x":459,"y":232,"id":21},{"x":359,"y":276,"id":22},{"x":384,"y":181,"id":23},{"x":245,"y":152,"id":24},{"x":181,"y":236,"id":25}],"connections":[{"source":{"x":181,"y":236,"id":25},"dest":{"x":245,"y":152,"id":24},"weight":1},{"source":{"x":245,"y":152,"id":24},"dest":{"x":384,"y":181,"id":23},"weight":1},{"source":{"x":384,"y":181,"id":23},"dest":{"x":459,"y":232,"id":21},"weight":1},{"source":{"x":459,"y":232,"id":21},"dest":{"x":570,"y":192,"id":19},"weight":1},{"source":{"x":570,"y":192,"id":19},"dest":{"x":744,"y":166,"id":18},"weight":1},{"source":{"x":744,"y":166,"id":18},"dest":{"x":895,"y":119,"id":17},"weight":1},{"source":{"x":895,"y":119,"id":17},"dest":{"x":923,"y":85,"id":15},"weight":1},{"source":{"x":923,"y":85,"id":15},"dest":{"x":996,"y":1,"id":16},"weight":1},{"source":{"x":923,"y":85,"id":15},"dest":{"x":1102,"y":210,"id":13},"weight":1},{"source":{"x":1102,"y":210,"id":13},"dest":{"x":1126,"y":101,"id":14},"weight":1},{"source":{"x":1102,"y":210,"id":13},"dest":{"x":1104,"y":279,"id":12},"weight":1},{"source":{"x":1104,"y":279,"id":12},"dest":{"x":1010,"y":451,"id":11},"weight":1},{"source":{"x":1010,"y":451,"id":11},"dest":{"x":847,"y":564,"id":9},"weight":1},{"source":{"x":847,"y":564,"id":9},"dest":{"x":985,"y":663,"id":10},"weight":1},{"source":{"x":621,"y":543,"id":7},"dest":{"x":847,"y":564,"id":9},"weight":1},{"source":{"x":615,"y":691,"id":8},"dest":{"x":621,"y":543,"id":7},"weight":1},{"source":{"x":621,"y":543,"id":7},"dest":{"x":395,"y":585,"id":5},"weight":1},{"source":{"x":395,"y":585,"id":5},"dest":{"x":276,"y":614,"id":6},"weight":1},{"source":{"x":168,"y":549,"id":0},"dest":{"x":176,"y":446,"id":1},"weight":1},{"source":{"x":176,"y":446,"id":1},"dest":{"x":228,"y":368,"id":2},"weight":1},{"source":{"x":228,"y":368,"id":2},"dest":{"x":271,"y":338,"id":3},"weight":1},{"source":{"x":271,"y":338,"id":3},"dest":{"x":348,"y":458,"id":4},"weight":1},{"source":{"x":348,"y":458,"id":4},"dest":{"x":395,"y":585,"id":5},"weight":1},{"source":{"x":271,"y":338,"id":3},"dest":{"x":359,"y":276,"id":22},"weight":1},{"source":{"x":359,"y":276,"id":22},"dest":{"x":459,"y":232,"id":21},"weight":1},{"source":{"x":570,"y":192,"id":19},"dest":{"x":647,"y":295,"id":20},"weight":1}]}');class s extends Phaser.GameObjects.Text{constructor(e){super(e,10,10,"",{color:"black",fontSize:"28px"}),e.add.existing(this),this.setOrigin(0)}update(){this.setText(`FPS: ${Math.floor(this.scene.game.loop.actualFps)}`)}}class o{constructor(e,t,i){this.x=e,this.y=t,this.id=i}}class n{constructor(){this.nodes=[],this.connections=[]}addNode(e){this.nodes.push(e)}addConnection(e,t,i){this.connections.push({source:e,dest:t,weight:i||1})}getConnections(e){return this.connections.filter((t=>{t.source===e||t.dest}))}getNode({x:e,y:t}){const i=this.nodes.filter((({x:i,y:d})=>Math.abs(e-i)<5&&Math.abs(t-d)<5));return 1===i.length?i[0]:new o(-1,-1,-1)}dump(){console.log(JSON.stringify({nodes:this.nodes,connections:this.connections}))}loadFromJSON({nodes:e,connections:t}){this.nodes=e,this.connections=t}}class r extends Phaser.Scene{constructor(){super({key:"MainScene"})}create(){this.grid=new n,this.add.sprite(0,0,"map").setOrigin(0),this.add.rectangle(256,16,32,16,65280).setInteractive().on("pointerdown",(e=>{console.log("pressed down"),this.grid.dump()})),this.add.rectangle(512,16,32,16,15790095).setInteractive().on("pointerdown",(e=>{console.log("pressed down"),this.grid.loadFromJSON(d),this.grid.nodes.forEach((e=>{this.addNode(e.x,e.y)})),this.grid.connections.forEach((e=>{this.addConnection(e.source,e.dest)}))})),this.input.on("pointerdown",(e=>{if(this.input.keyboard.addKey("SPACE").isUp)return;const t=e.x,i=e.y;this.grid.addNode(new o(Math.round(t),Math.round(i),this.grid.nodes.length)),this.addNode(t,i)})),this.fpsText=new s(this)}addNode(e,t){this.add.circle(e,t,5,16711680).setInteractive().on("pointerdown",(e=>{if(this.editing){const t=this.grid.getNode(e);if(-1==t.id)return;return this.grid.addConnection(this.editedStartNode,t),this.addConnection(this.editedStartNode,t),this.editedStartNode=new o(-1,-1,-1),this.editing=!1,void console.log("not editing anymore")}console.log("now editing"),this.editing=!0,this.editedStartNode=this.grid.getNode(e)}))}addConnection(e,t){this.add.line(e.x,e.y,0,0,-1*(e.x-t.x),-1*(e.y-t.y),255).setOrigin(0)}update(){this.fpsText.update()}}class c extends Phaser.Scene{constructor(){super({key:"PreloadScene"})}preload(){this.load.image("phaser-logo","assets/img/phaser-logo.png"),this.load.image("map","assets/maps/startermap.png")}create(){this.scene.start("MainScene")}}const a={type:Phaser.AUTO,backgroundColor:"#ffffff",scale:{parent:"phaser-game",mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:720},scene:[c,r],physics:{default:"arcade",arcade:{debug:!1,gravity:{y:400}}}};window.addEventListener("load",(()=>{new Phaser.Game(a)}))},204:()=>{console.log("%c %c %c %c %c Built using phaser-project-template %c https://github.com/yandeu/phaser-project-template","background: #ff0000","background: #ffff00","background: #00ff00","background: #00ffff","color: #fff; background: #000000;","background: none")}},i={};function d(e){var s=i[e];if(void 0!==s)return s.exports;var o=i[e]={exports:{}};return t[e].call(o.exports,o,o.exports,d),o.exports}d.m=t,e=[],d.O=(t,i,s,o)=>{if(!i){var n=1/0;for(a=0;a<e.length;a++){for(var[i,s,o]=e[a],r=!0,c=0;c<i.length;c++)(!1&o||n>=o)&&Object.keys(d.O).every((e=>d.O[e](i[c])))?i.splice(c--,1):(r=!1,o<n&&(n=o));r&&(e.splice(a--,1),t=s())}return t}o=o||0;for(var a=e.length;a>0&&e[a-1][2]>o;a--)e[a]=e[a-1];e[a]=[i,s,o]},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0};d.O.j=t=>0===e[t];var t=(t,i)=>{var s,o,[n,r,c]=i,a=0;for(s in r)d.o(r,s)&&(d.m[s]=r[s]);if(c)var h=c(d);for(t&&t(i);a<n.length;a++)o=n[a],d.o(e,o)&&e[o]&&e[o][0](),e[n[a]]=0;return d.O(h)},i=self.webpackChunkld48=self.webpackChunkld48||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),d.O(void 0,[216],(()=>d(627)));var s=d.O(void 0,[216],(()=>d(204)));s=d.O(s)})();